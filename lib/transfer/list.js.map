{"version":3,"sources":["transfer/list.jsx"],"names":["noop","isRenderResultPlainObject","result","React","isValidElement","Object","prototype","toString","call","TransferList","props","handleSelect","selectedItem","checkedKeys","some","key","handleFilter","e","target","value","triggerScrollTimer","window","setTimeout","transferNode","ReactDOM","findDOMNode","listNode","querySelectorAll","handleClear","matchFilter","text","item","filter","filterOption","indexOf","renderItem","render","renderResult","isRenderResultPlain","renderedText","renderedEl","label","state","mounted","timer","setState","clearTimeout","args","PureRenderMixin","shouldComponentUpdate","apply","filteredDataSource","length","every","prefixCls","dataSource","titleText","lazy","disabled","body","footer","showSearch","style","searchPlaceholder","notFoundContent","itemUnit","itemsUnit","onScroll","footerDom","bodyDom","listCls","totalDataSource","showItems","map","trim","push","checked","unit","search","searchNotFound","listBody","listFooter","checkStatus","getCheckStatus","checkedAll","checkAllCheckbox","handleSelectAll","Component","defaultProps"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport classNames from 'classnames';\nimport Animate from 'rc-animate';\nimport PureRenderMixin from 'rc-util/lib/PureRenderMixin';\nimport Checkbox from '../checkbox';\nimport Search from './search';\nimport Item from './item';\nimport triggerEvent from '../_util/triggerEvent';\nfunction noop() { }\nfunction isRenderResultPlainObject(result) {\n    return (result &&\n        !React.isValidElement(result) &&\n        Object.prototype.toString.call(result) === '[object Object]');\n}\nexport default class TransferList extends React.Component {\n    constructor(props) {\n        super(props);\n        this.handleSelect = (selectedItem) => {\n            const { checkedKeys } = this.props;\n            const result = checkedKeys.some(key => key === selectedItem.key);\n            this.props.handleSelect(selectedItem, !result);\n        };\n        this.handleFilter = (e) => {\n            this.props.handleFilter(e);\n            if (!e.target.value) {\n                return;\n            }\n            // Manually trigger scroll event for lazy search bug\n            // https://github.com/ant-design/ant-design/issues/5631\n            this.triggerScrollTimer = window.setTimeout(() => {\n                const transferNode = ReactDOM.findDOMNode(this);\n                const listNode = transferNode.querySelectorAll('.ant-transfer-list-content')[0];\n                if (listNode) {\n                    triggerEvent(listNode, 'scroll');\n                }\n            }, 0);\n        };\n        this.handleClear = () => {\n            this.props.handleClear();\n        };\n        this.matchFilter = (text, item) => {\n            const { filter, filterOption } = this.props;\n            if (filterOption) {\n                return filterOption(filter, item);\n            }\n            return text.indexOf(filter) >= 0;\n        };\n        this.renderItem = (item) => {\n            const { render = noop } = this.props;\n            const renderResult = render(item);\n            const isRenderResultPlain = isRenderResultPlainObject(renderResult);\n            return {\n                renderedText: isRenderResultPlain ? renderResult.value : renderResult,\n                renderedEl: isRenderResultPlain ? renderResult.label : renderResult,\n            };\n        };\n        this.state = {\n            mounted: false,\n        };\n    }\n    componentDidMount() {\n        this.timer = window.setTimeout(() => {\n            this.setState({\n                mounted: true,\n            });\n        }, 0);\n    }\n    componentWillUnmount() {\n        clearTimeout(this.timer);\n        clearTimeout(this.triggerScrollTimer);\n    }\n    shouldComponentUpdate(...args) {\n        return PureRenderMixin.shouldComponentUpdate.apply(this, args);\n    }\n    getCheckStatus(filteredDataSource) {\n        const { checkedKeys } = this.props;\n        if (checkedKeys.length === 0) {\n            return 'none';\n        }\n        else if (filteredDataSource.every(item => checkedKeys.indexOf(item.key) >= 0)) {\n            return 'all';\n        }\n        return 'part';\n    }\n    render() {\n        const { prefixCls, dataSource, titleText, checkedKeys, lazy, disabled, body, footer, showSearch, style, filter, searchPlaceholder, notFoundContent, itemUnit, itemsUnit, onScroll, } = this.props;\n        // Custom Layout\n        const footerDom = footer && footer(this.props);\n        const bodyDom = body && body(this.props);\n        const listCls = classNames(prefixCls, {\n            [`${prefixCls}-with-footer`]: !!footerDom,\n        });\n        const filteredDataSource = [];\n        const totalDataSource = [];\n        const showItems = dataSource.map(item => {\n            const { renderedText, renderedEl } = this.renderItem(item);\n            if (filter && filter.trim() && !this.matchFilter(renderedText, item)) {\n                return null;\n            }\n            // all show items\n            totalDataSource.push(item);\n            if (!item.disabled) {\n                // response to checkAll items\n                filteredDataSource.push(item);\n            }\n            const checked = checkedKeys.indexOf(item.key) >= 0;\n            return (<Item disabled={disabled} key={item.key} item={item} lazy={lazy} renderedText={renderedText} renderedEl={renderedEl} checked={checked} prefixCls={prefixCls} onClick={this.handleSelect}/>);\n        });\n        const unit = dataSource.length > 1 ? itemsUnit : itemUnit;\n        const search = showSearch ? (<div className={`${prefixCls}-body-search-wrapper`}>\n        <Search prefixCls={`${prefixCls}-search`} onChange={this.handleFilter} handleClear={this.handleClear} placeholder={searchPlaceholder} value={filter} disabled={disabled}/>\n      </div>) : null;\n        const searchNotFound = showItems.every(item => item === null) && (<div className={`${prefixCls}-body-not-found`}>{notFoundContent}</div>);\n        const listBody = bodyDom || (<div className={classNames(showSearch ? `${prefixCls}-body ${prefixCls}-body-with-search` : `${prefixCls}-body`)}>\n        {search}\n        {!searchNotFound && (<Animate component=\"ul\" componentProps={{ onScroll }} className={`${prefixCls}-content`} transitionName={this.state.mounted ? `${prefixCls}-content-item-highlight` : ''} transitionLeave={false}>\n            {showItems}\n          </Animate>)}\n        {searchNotFound}\n      </div>);\n        const listFooter = footerDom ? <div className={`${prefixCls}-footer`}>{footerDom}</div> : null;\n        const checkStatus = this.getCheckStatus(filteredDataSource);\n        const checkedAll = checkStatus === 'all';\n        const checkAllCheckbox = (<Checkbox disabled={disabled} checked={checkedAll} indeterminate={checkStatus === 'part'} onChange={() => this.props.handleSelectAll(filteredDataSource, checkedAll)}/>);\n        return (<div className={listCls} style={style}>\n        <div className={`${prefixCls}-header`}>\n          {checkAllCheckbox}\n          <span className={`${prefixCls}-header-selected`}>\n            <span>\n              {(checkedKeys.length > 0 ? `${checkedKeys.length}/` : '') + totalDataSource.length}{' '}\n              {unit}\n            </span>\n            <span className={`${prefixCls}-header-title`}>{titleText}</span>\n          </span>\n        </div>\n        {listBody}\n        {listFooter}\n      </div>);\n    }\n}\nTransferList.defaultProps = {\n    dataSource: [],\n    titleText: '',\n    showSearch: false,\n    render: noop,\n    lazy: {},\n};\n"],"file":"list.js"}