{"version":3,"sources":["calendar/Header.jsx"],"names":["Option","Select","Header","arguments","onYearChange","year","props","value","validRange","newValue","clone","parseInt","start","end","newYear","get","newMonth","month","onValueChange","onMonthChange","onTypeChange","e","target","getCalenderHeaderNode","node","calenderHeaderNode","renderHeader","getPrefixCls","customizePrefixCls","prefixCls","type","locale","fullscreen","yearSelect","getYearSelectElement","monthSelect","getMonthSelectElement","getMonthsLocale","size","typeSwitch","yearSelectOffset","yearSelectTotal","suffix","options","index","push","String","current","localeData","months","i","monthsShort","rangeStart","rangeEnd","currentYear","React","Component","defaultProps"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport Select from '../select';\nimport { Group, Button } from '../radio';\nimport { ConfigConsumer } from '../config-provider';\nconst Option = Select.Option;\nexport default class Header extends React.Component {\n    constructor() {\n        super(...arguments);\n        this.onYearChange = (year) => {\n            const { value, validRange } = this.props;\n            const newValue = value.clone();\n            newValue.year(parseInt(year, 10));\n            // switch the month so that it remains within range when year changes\n            if (validRange) {\n                const [start, end] = validRange;\n                const newYear = newValue.get('year');\n                const newMonth = newValue.get('month');\n                if (newYear === end.get('year') && newMonth > end.get('month')) {\n                    newValue.month(end.get('month'));\n                }\n                if (newYear === start.get('year') && newMonth < start.get('month')) {\n                    newValue.month(start.get('month'));\n                }\n            }\n            const onValueChange = this.props.onValueChange;\n            if (onValueChange) {\n                onValueChange(newValue);\n            }\n        };\n        this.onMonthChange = (month) => {\n            const newValue = this.props.value.clone();\n            newValue.month(parseInt(month, 10));\n            const onValueChange = this.props.onValueChange;\n            if (onValueChange) {\n                onValueChange(newValue);\n            }\n        };\n        this.onTypeChange = (e) => {\n            const onTypeChange = this.props.onTypeChange;\n            if (onTypeChange) {\n                onTypeChange(e.target.value);\n            }\n        };\n        this.getCalenderHeaderNode = (node) => {\n            this.calenderHeaderNode = node;\n        };\n        this.renderHeader = ({ getPrefixCls }) => {\n            const { prefixCls: customizePrefixCls, type, value, locale, fullscreen } = this.props;\n            const prefixCls = getPrefixCls('fullcalendar', customizePrefixCls);\n            const yearSelect = this.getYearSelectElement(prefixCls, value.year());\n            const monthSelect = type === 'month'\n                ? this.getMonthSelectElement(prefixCls, value.month(), this.getMonthsLocale(value))\n                : null;\n            const size = fullscreen ? 'default' : 'small';\n            const typeSwitch = (<Group onChange={this.onTypeChange} value={type} size={size}>\n        <Button value=\"month\">{locale.month}</Button>\n        <Button value=\"year\">{locale.year}</Button>\n      </Group>);\n            return (<div className={`${prefixCls}-header`} ref={this.getCalenderHeaderNode}>\n        {yearSelect}\n        {monthSelect}\n        {typeSwitch}\n      </div>);\n        };\n    }\n    getYearSelectElement(prefixCls, year) {\n        const { yearSelectOffset, yearSelectTotal, locale, fullscreen, validRange } = this.props;\n        let start = year - yearSelectOffset;\n        let end = start + yearSelectTotal;\n        if (validRange) {\n            start = validRange[0].get('year');\n            end = validRange[1].get('year') + 1;\n        }\n        const suffix = locale.year === '年' ? '年' : '';\n        const options = [];\n        for (let index = start; index < end; index++) {\n            options.push(<Option key={`${index}`}>{index + suffix}</Option>);\n        }\n        return (<Select size={fullscreen ? 'default' : 'small'} dropdownMatchSelectWidth={false} className={`${prefixCls}-year-select`} onChange={this.onYearChange} value={String(year)} getPopupContainer={() => this.calenderHeaderNode}>\n        {options}\n      </Select>);\n    }\n    getMonthsLocale(value) {\n        const current = value.clone();\n        const localeData = value.localeData();\n        const months = [];\n        for (let i = 0; i < 12; i++) {\n            current.month(i);\n            months.push(localeData.monthsShort(current));\n        }\n        return months;\n    }\n    getMonthSelectElement(prefixCls, month, months) {\n        const { fullscreen, validRange, value } = this.props;\n        const options = [];\n        let start = 0;\n        let end = 12;\n        if (validRange) {\n            const [rangeStart, rangeEnd] = validRange;\n            const currentYear = value.get('year');\n            if (rangeEnd.get('year') === currentYear) {\n                end = rangeEnd.get('month') + 1;\n            }\n            if (rangeStart.get('year') === currentYear) {\n                start = rangeStart.get('month');\n            }\n        }\n        for (let index = start; index < end; index++) {\n            options.push(<Option key={`${index}`}>{months[index]}</Option>);\n        }\n        return (<Select size={fullscreen ? 'default' : 'small'} dropdownMatchSelectWidth={false} className={`${prefixCls}-month-select`} value={String(month)} onChange={this.onMonthChange} getPopupContainer={() => this.calenderHeaderNode}>\n        {options}\n      </Select>);\n    }\n    render() {\n        return <ConfigConsumer>{this.renderHeader}</ConfigConsumer>;\n    }\n}\nHeader.defaultProps = {\n    yearSelectOffset: 10,\n    yearSelectTotal: 20,\n};\n"],"file":"Header.js"}